<!DOCTYPE html>
<html lang="ru">
<head> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
  <link rel="manifest" href="icons/site.webmanifest">
  <meta name="theme-color" content="#020714">
  <link rel="preconnect" href="https://dl.dropboxusercontent.com" crossorigin>
  <title>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –∞–≤—Ç–æ—Ä–∞-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –í–∞—Ä–∏ –ö—É–∑–Ω–µ—Ü–æ–≤–æ–π</title>
  <style>
    :root{
      --color-night-01:#020714;--color-night-03:#0b1429;--color-pink:#F294C0;--color-gold:#F2C53D;
      --color-text-primary:#F8F5FF;--color-text-secondary:rgba(248,245,255,.72);--color-text-muted:rgba(248,245,255,.55);
      --color-surface:rgba(14,22,45,.92);--color-surface-alt:rgba(19,28,53,.9);--color-border:rgba(242,148,192,.28);
      --radius-base:20px;--radius-lg:28px;--radius-pill:999px;
      --font-family-base:'Excalifont','Excalifont Fallback','Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      --transition-snappy:cubic-bezier(0.16,1,0.3,1);--transition-duration:420ms;
      --fab-size:clamp(88px,25vmin,220px); /* 1/4 —ç–∫—Ä–∞–Ω–∞ –Ω–∞ –ü–ö –∏ –º–æ–±–∏–ª–∫–∞—Ö */
    }
    @font-face{
      font-family:'Excalifont';
      src:url('fonts/Excalifont-Regular.woff2') format('woff2'),
          url('fonts/Excalifont-Regular.ttf') format('truetype');
      font-display:swap;font-weight:400;font-style:normal;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{padding:0;margin:0}
    html{background:#020714}
    body{
      min-height:100vh;font-family:var(--font-family-base);color:var(--color-text-primary);
      background:radial-gradient(circle at top right,rgba(11,40,92,.55),transparent 45%),
                 radial-gradient(circle at 20% 20%,rgba(242,148,192,.18),transparent 40%),
                 linear-gradient(160deg,var(--color-night-01) 0%,var(--color-night-03) 60%,#020714 100%);
      background-attachment:fixed;line-height:1.55;-webkit-font-smoothing:antialiased;
    }
    @media (max-width:768px){ body{ background-attachment:scroll; } }
    a{color:inherit}
    .page{max-width:1080px;margin:0 auto;padding:clamp(32px,4vw,64px) clamp(20px,4vw,48px) 120px}
    .section-card{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);
      box-shadow:0 32px 60px rgba(2,6,20,.55);padding:clamp(32px,3vw,48px);backdrop-filter:blur(18px)}
    header.hero{text-align:center;margin-bottom:clamp(40px,6vw,72px)}
    .hero-inner{display:flex;flex-direction:column;align-items:center;gap:clamp(20px,3vw,36px)}
    @media (min-width:720px){.hero-inner{flex-direction:row;justify-content:center}}
    .artist-avatar{position:relative;display:inline-flex;align-items:center;justify-content:center}
    .artist-avatar::before{content:'';position:absolute;inset:-14px;border-radius:50%;
      background:conic-gradient(from 140deg,rgba(242,148,192,.12),rgba(191,131,78,.4),rgba(242,197,61,.12));
      filter:blur(20px);opacity:.75}
    .artist-avatar-frame{width:clamp(160px,22vw,220px);aspect-ratio:1/1;border-radius:50%;
      border:4px solid rgba(242,148,192,.65);box-shadow:0 24px 48px rgba(2,6,20,.65),0 0 0 12px rgba(242,148,192,.08);
      overflow:hidden;position:relative;background:radial-gradient(circle at 30% 30%,rgba(242,148,192,.4),transparent 65%),rgba(8,15,33,.85);
      display:flex;align-items:center;justify-content:center}
    .artist-avatar-frame img{width:100%;height:100%;object-fit:cover;display:block}
    .artist-name{font-size:clamp(40px,7vw,76px);font-weight:400;letter-spacing:2px;text-transform:uppercase;margin:0;
      color:var(--color-gold)!important}
    .section-title{font-size:clamp(28px,4vw,36px);font-weight:400;margin:0 0 16px;color:var(--color-pink);
      text-transform:uppercase;letter-spacing:2px}
    /* —à–∞–ø–∫–∞ */
    .desktop-only{display:none}
    @media (min-width:1024px){
      .desktop-only{display:block}
      .site-header{position:sticky;top:0;z-index:1000;backdrop-filter:blur(6px);
        background:rgba(2,7,20,.65);border-bottom:1px solid rgba(242,148,192,.12)}
      .site-nav{max-width:1200px;margin:0 auto;padding:12px 20px;display:flex;gap:24px;justify-content:center}
      .site-nav a{color:#F294C0;text-decoration:none;font-size:16px;letter-spacing:.2px;transition:opacity .2s}
      .site-nav a:hover{opacity:.8}
      .section-title[id]{scroll-margin-top:80px}
      .page{padding-top:calc(clamp(32px,4vw,64px) + 64px)}
    }
    /* –º–æ–±. —à–∞–ø–∫–∞ */
    .mobile-only{display:block}
    @media (min-width:1024px){.mobile-only{display:none}}
    .site-header-mobile{position:sticky;top:0;z-index:1100;background:transparent!important;border-bottom:0!important}
    .mobile-bar{display:flex;align-items:center;justify-content:space-between;padding:10px 14px}
    .burger{width:40px;height:40px;display:grid;place-items:center;background:transparent;border:1px solid rgba(242,148,192,.22);border-radius:12px}
    .burger span{display:block;width:18px;height:2px;background:#F294C0;margin:2px 0;transition:transform .25s var(--transition-snappy),opacity .25s var(--transition-snappy)}
    .burger.is-open span:nth-child(1){transform:translateY(4px) rotate(45deg)}
    .burger.is-open span:nth-child(2){opacity:0}
    .burger.is-open span:nth-child(3){transform:translateY(-4px) rotate(-45deg)}
    .mobile-menu{position:fixed;left:0;right:0;top:0;transform:translateY(-100%);transition:transform .28s,opacity .28s;
      background:rgba(2,7,20,.96);border-bottom:1px solid rgba(242,148,192,.14);padding:12px 14px 6px;z-index:1200;opacity:0}
    .mobile-menu.open{transform:translateY(0);opacity:1}
    .mobile-nav a{display:block;padding:12px 6px;font-family:var(--font-family-base);color:#F294C0;text-decoration:none;font-size:16px;letter-spacing:.2px;text-align:center}
    .mobile-overlay{position:fixed;inset:0;background:rgba(2,7,20,.55);z-index:1190;opacity:0;transition:opacity .28s}
    .mobile-overlay.show{opacity:1}
    @media (max-width:1023.98px){.section-title[id]{scroll-margin-top:80px}}

    /* –ú—É–∑—ã–∫–∞ ‚Äî –ø–æ–¥–Ω—è–ª–∏ –Ω–∞–≤–µ—Ä—Ö */
    .music-section{margin-top:clamp(24px,6vw,48px);display:grid;gap:32px}
    .music-section .section-title{text-align:center;width:100%}
    .player-shell{display:grid;gap:28px}
    .now-playing{display:grid;gap:24px;grid-template-columns:minmax(0,260px) minmax(0,1fr);align-items:center}
    @media (max-width:640px){.now-playing{grid-template-columns:1fr;text-align:center}}
    .cover-frame{position:relative;border-radius:28px;overflow:hidden;aspect-ratio:1/1;border:1px solid rgba(242,148,192,.22);
      background:linear-gradient(145deg,rgba(242,148,192,.25),rgba(191,131,78,.18));box-shadow:0 20px 40px rgba(2,6,20,.35)}
    .cover-frame img{width:100%;height:100%;object-fit:cover;display:block}
    .now-playing-info{display:grid;gap:14px}
    .now-playing-label{font-size:16px;letter-spacing:1.2px;color:var(--color-text-muted);text-transform:uppercase}
    .track-title{font-size:clamp(26px,4vw,34px);color:var(--color-gold);margin:0}
    .track-artist{font-size:20px;color:var(--color-text-secondary)}
    .progress-bar{display:grid;gap:14px}
    .seek{-webkit-appearance:none;appearance:none;height:8px;border-radius:999px;background:rgba(242,148,192,.18);overflow:hidden}
    .seek::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--color-pink);box-shadow:-400px 0 0 400px rgba(242,148,192,.38);cursor:pointer}
    .seek::-moz-range-thumb{width:18px;height:18px;border-radius:50%;border:none;background:var(--color-pink);box-shadow:-400px 0 0 400px rgba(242,148,192,.38);cursor:pointer}
    .timecodes{display:flex;justify-content:space-between;color:var(--color-text-muted);font-size:14px}
    .player-controls{display:flex;gap:16px;align-items:center;justify-content:flex-start}
    @media (max-width:640px){.player-controls{justify-content:center}}
    .control-btn{width:52px;height:52px;border-radius:50%;border:1px solid rgba(242,148,192,.32);background:rgba(8,16,34,.75);
      color:var(--color-text-primary);display:inline-flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;
      transition:transform var(--transition-duration) var(--transition-snappy),background var(--transition-duration) var(--transition-snappy),border-color var(--transition-duration) var(--transition-snappy)}
    .control-btn:hover{transform:translateY(-3px);background:rgba(242,148,192,.2);border-color:rgba(242,148,192,.45)}
    .tracklist{display:grid;gap:12px}
    .track-item{display:flex;justify-content:space-between;align-items:center;gap:24px;padding:16px 20px;border-radius:var(--radius-base);
      border:1px solid rgba(242,148,192,.18);background:rgba(6,14,30,.85);color:var(--color-text-secondary);cursor:pointer;
      transition:transform var(--transition-duration) var(--transition-snappy),border-color var(--transition-duration) var(--transition-snappy),color var(--transition-duration) var(--transition-snappy)}
    .track-item:hover{transform:translateX(4px);border-color:rgba(242,148,192,.4);color:var(--color-text-primary)}
    .track-item.is-active{border-color:rgba(242,197,61,.55);background:linear-gradient(120deg,rgba(242,148,192,.28),rgba(242,197,61,.18));color:var(--color-text-primary)}
    .track-item span:first-child{font-size:18px}
    .track-duration{font-size:14px;color:var(--color-text-muted)}
    .track-badge{margin-left:10px;padding:4px 10px;border:1px solid rgba(242,148,192,.35);border-radius:999px;background:rgba(242,148,192,.14);
      color:var(--color-pink);font-size:12px;text-transform:uppercase;letter-spacing:.6px}

    /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å (–∏–¥—ë—Ç –ø–æ—Å–ª–µ –ø–ª–µ–µ—Ä–∞) */
    .calendar-section{margin-top:clamp(32px,6vw,56px);display:grid;gap:32px}
    .calendar-section .section-title{text-align:center;width:100%}
    .calendar-header{display:flex;flex-direction:column;gap:8px;align-items:center}
    .calendar-month-label{font-size:clamp(20px,3vw,26px);letter-spacing:1px;color:var(--color-text-primary);text-align:center}
    .calendar-controls{margin-top:-12px;display:flex;align-items:center;justify-content:center;gap:16px}
    @media (max-width:600px){.calendar-controls{margin-top:-20px}}
    .calendar-nav{width:48px;height:48px;border-radius:50%;background:rgba(242,148,192,.16);border:1px solid rgba(242,148,192,.25);
      color:var(--color-text-primary);display:inline-flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;
      transition:transform var(--transition-duration) var(--transition-snappy),background var(--transition-duration) var(--transition-snappy)}
    .calendar-nav:hover{transform:translateY(-3px);background:rgba(242,148,192,.28)}
    .calendar-stage{position:relative;display:grid;grid-template-columns:1fr;grid-auto-rows:auto;margin-top:-12px;border-radius:20px;
      border:1px solid rgba(242,148,192,.22);background:linear-gradient(135deg,rgba(11,23,46,.9),rgba(6,13,32,.9));overflow:hidden}
    .calendar-month{position:relative;grid-area:1/1/2/2;padding:clamp(20px,4vw,36px);display:grid;gap:18px;opacity:0;transform:translateY(40%);
      pointer-events:none;transition:transform 520ms var(--transition-snappy),opacity 520ms var(--transition-snappy)}
    .calendar-month.is-active{opacity:1;transform:translateY(0);pointer-events:auto}
    .calendar-weekdays,.calendar-grid{display:grid;grid-template-columns:repeat(7,minmax(0,1fr));gap:12px}
    .weekday{text-transform:uppercase;font-size:14px;color:rgba(248,245,255,.4);letter-spacing:1.6px;text-align:center}
    .calendar-day{position:relative;aspect-ratio:1/1;border-radius:22px;display:flex;align-items:center;justify-content:center;
      font-size:clamp(16px,2.1vw,18px);background:rgba(8,16,34,.65);border:1px solid rgba(242,148,192,.08);color:var(--color-text-primary);
      transition:transform 320ms var(--transition-snappy),border-color 320ms var(--transition-snappy),box-shadow 320ms var(--transition-snappy);z-index:0}
    .calendar-day.empty{background:transparent;border-color:transparent}
    .calendar-day.performance{border-color:rgba(242,148,192,.5);background:linear-gradient(145deg,rgba(242,148,192,.2),rgba(191,131,78,.18));cursor:pointer}
    .calendar-day.performance:hover{transform:translateY(-6px);box-shadow:0 16px 26px rgba(242,148,192,.18)}
    .calendar-day.performance.selected{border-color:rgba(242,197,61,.8);box-shadow:0 0 0 3px rgba(242,197,61,.25);color:var(--color-gold)}
    .calendar-day.performance.past{opacity:.4;filter:grayscale(.25);cursor:default}
    .event-wrapper{margin-top:-12px}
    .event-details-card{display:flex;flex-direction:column;gap:28px;background:var(--color-surface-alt);border-radius:20px;border:1px solid rgba(242,148,192,.16);
      padding:clamp(24px,3vw,32px);box-shadow:0 20px 40px rgba(2,6,20,.35)}
    .event-details-top{display:flex;gap:36px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .event-info{display:grid;gap:10px;min-width:240px}
    .event-date{font-size:clamp(24px,3vw,30px);letter-spacing:1.2px;color:var(--color-gold)}
    .event-meta{color:var(--color-text-secondary);font-size:18px}
    .event-special{display:inline-flex;align-items:center;gap:8px;padding:6px 14px;border-radius:999px;border:1px solid rgba(242,148,192,.35);
      background:rgba(242,148,192,.14);color:var(--color-pink);font-size:14px;letter-spacing:1px;text-transform:uppercase}
    .event-map-links{display:flex;flex-direction:column;gap:12px;align-items:stretch;justify-content:center}
    .map-btn{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 18px;border-radius:20px;border:1px solid rgba(242,148,192,.2);
      background:rgba(8,16,34,.72);color:var(--color-text-primary);text-decoration:none;font-size:16px;letter-spacing:.5px;transition:transform var(--transition-duration) var(--transition-snappy),border-color var(--transition-duration) var(--transition-snappy),box-shadow var(--transition-duration) var(--transition-snappy)}
    .map-btn:hover{transform:translateX(4px);border-color:rgba(242,148,192,.45);box-shadow:0 16px 22px rgba(242,148,192,.16)}
    .map-btn img{width:28px;height:28px;object-fit:contain}
    .event-empty{color:var(--color-text-muted);text-align:center;font-size:18px}
    @media (min-width:1024px){.calendar-section.section-card{padding:24px 32px}
      .calendar-stage{max-width:760px;margin:0 auto;min-height:340px}
    }
    @media (max-width:600px){
      .calendar-month{padding:20px 16px}
      .calendar-weekdays,.calendar-grid{gap:6px}
      .weekday{font-size:12px}
      .calendar-day{border-radius:16px;font-size:14px}
    }

    /* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å + –¥–æ–∫-—Ä–∞–º–∫–∞ */
    .support-fab{
      position:fixed;right:16px;bottom:16px;z-index:1300;width:var(--fab-size);height:var(--fab-size);
      display:inline-flex;align-items:center;justify-content:center;text-decoration:none;color:var(--color-text-primary);
      border-radius:20px;border:1px solid rgba(242,148,192,.45);
      background:linear-gradient(120deg,rgba(242,148,192,.22),rgba(242,197,61,.22),rgba(242,148,192,.22));
      background-size:220% 220%;
      animation:supportGlow 4s ease-in-out infinite;
      transition:transform .25s var(--transition-snappy),box-shadow .25s var(--transition-snappy);
      box-shadow:0 18px 30px rgba(242,148,192,.25);
      font-size:clamp(16px,2.4vmin,20px);
    }
    .support-fab:hover{transform:translateY(-3px)}
    @keyframes supportGlow{
      0%{background-position:0% 50%;box-shadow:0 0 0 rgba(242,148,192,0)}
      50%{background-position:100% 50%;box-shadow:0 0 18px rgba(242,148,192,.45)}
      100%{background-position:0% 50%;box-shadow:0 0 0 rgba(242,148,192,0)}
    }
    .support-quote{margin-top:clamp(40px,7vw,72px);display:grid;gap:20px}
    .support-grid{display:grid;grid-template-columns:1fr minmax(0, var(--fab-size));gap:24px;align-items:center}
    @media (max-width:700px){.support-grid{grid-template-columns:1fr}}
    blockquote{
      margin:0;padding:20px;border-left:3px solid rgba(242,148,192,.35);background:rgba(8,16,34,.55);
      border-radius:12px;color:var(--color-text-secondary);font-size:18px
    }
    .support-dock{
      justify-self:end;min-width:var(--fab-size);min-height:var(--fab-size);
      border:2px dashed rgba(242,148,192,.45);border-radius:20px;display:grid;place-items:center;color:var(--color-text-muted)
    }
    /* –∫–æ–≥–¥–∞ –∫–Ω–æ–ø–∫–∞ ¬´–ø—Ä–∏–∑–µ–º–ª–∏–ª–∞—Å—å¬ª –≤ –ø—É–Ω–∫—Ç–∏—Ä */
    .support-fab.is-docked{position:static;width:100%;height:100%;animation:none}

    /* —Ñ—É—Ç–µ—Ä */
    .site-footer{margin-top:40px;padding:24px 16px;text-align:center;border-top:1px solid rgba(242,148,192,.14);color:var(--color-text-primary)}
    .site-footer a{color:#F294C0;text-decoration:none}
    .site-footer a:hover{text-decoration:underline}
    .footer-privacy{margin-top:8px}
    .footer-made{margin-top:6px;font-size:14px;color:rgba(255,255,255,.6)}
    .footer-made-link{color:inherit;text-decoration:underline;text-underline-offset:3px}

    /* ¬´–°–µ–π—á–∞—Å –∑–≤—É—á–∏—Ç¬ª ‚Äî —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è */
    #nowPlayingTitle{display:none}.player-playing #nowPlayingTitle{display:block}

    /* —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–π —Å–∫—Ä–æ–ª–ª —è–∫–æ—Ä–µ–π */
    html{scroll-behavior:smooth}
  </style>
</head>

<body>
  <!-- –î–µ—Å–∫—Ç–æ–ø-—Ö–µ–¥–µ—Ä -->
  <header class="site-header desktop-only">
    <nav class="site-nav">
      <a href="#supportTitle">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</a>
      <a href="#calendarTitle">–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</a>
      <a href="#musicTitle">–°–ª—É—à–∞—Ç—å</a>
      <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>
  </header>

  <!-- –ú–æ–±–∏–ª—å–Ω—ã–π —Ö–µ–¥–µ—Ä -->
  <header class="site-header-mobile mobile-only">
    <div class="mobile-bar">
      <button id="mobileMenuButton" class="burger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" aria-expanded="false" aria-controls="mobileMenu">
        <span></span><span></span><span></span>
      </button>
      <div class="mobile-brand"></div>
    </div>
    <div id="mobileMenu" class="mobile-menu" hidden>
      <nav class="mobile-nav" role="menu">
        <a href="#supportTitle" role="menuitem">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</a>
        <a href="#calendarTitle" role="menuitem">–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è</a>
        <a href="#musicTitle" role="menuitem">–°–ª—É—à–∞—Ç—å</a>
        <a href="#contacts" role="menuitem">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </nav>
    </div>
    <div id="mobileMenuOverlay" class="mobile-overlay" hidden></div>
  </header>

  <div class="page">
    <!-- HERO -->
    <header class="hero">
      <div class="hero-inner">
        <div class="artist-avatar" aria-hidden="true">
          <div class="artist-avatar-frame">
            <img src="images/artist.jpg" alt="–§–æ—Ç–æ –í–∞—Ä–∏ –ö—É–∑–Ω–µ—Ü–æ–≤–æ–π" />
          </div>
        </div>
        <div class="hero-copy">
          <h1 class="artist-name">–í–∞—Ä—è –ö—É–∑–Ω–µ—Ü–æ–≤–∞</h1>
        </div>
      </div>
    </header>

    <!-- –ú–£–ó–´–ö–ê (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤–≤–µ—Ä—Ö) -->
    <section class="music-section section-card" aria-labelledby="musicTitle">
      <h2 id="musicTitle" class="section-title">–ú–æ–∏ –ø–µ—Å–Ω–∏</h2>
      <div class="player-shell">
        <div class="now-playing">
          <div class="cover-frame">
            <img id="trackCover" src="images/holodno.png" alt="–û–±–ª–æ–∂–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞" />
          </div>
          <div class="now-playing-info">
            <span id="nowPlayingTitle" class="now-playing-label">–°–µ–π—á–∞—Å –∑–≤—É—á–∏—Ç</span>
            <h3 id="trackTitle" class="track-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞</h3>
            <span id="trackArtist" class="track-artist"></span>
            <div class="progress-bar">
              <input id="seekBar" class="seek" type="range" min="0" max="100" value="0" step="0.1" aria-label="–ü–µ—Ä–µ–º–æ—Ç–∫–∞ —Ç—Ä–µ–∫–∞">
              <div class="timecodes">
                <span id="currentTime">0:00</span>
                <span id="totalTime">0:00</span>
              </div>
            </div>
            <div class="player-controls">
              <button class="control-btn" id="prevTrack" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ç—Ä–µ–∫">‚ü∏</button>
              <button class="control-btn" id="playPause" aria-label="–ü—É—Å–∫ / –ø–∞—É–∑–∞">‚ñ∂</button>
              <button class="control-btn" id="nextTrack" aria-label="–°–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–∫">‚üπ</button>
            </div>
          </div>
        </div>
        <div class="tracklist" id="trackList" aria-label="–°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤"></div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤ (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –±—ã–ª–æ) -->
      <div class="streaming-grid" id="streamingLinks">
        <a class="streaming-card" id="streamYandex" data-service="yandex" href="#" target="_blank" rel="noopener">
          <span class="service-name">–Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞</span><span class="listen-chip">–°–ª—É—à–∞—Ç—å</span>
        </a>
        <a class="streaming-card" id="streamVK" data-service="vk" href="#" target="_blank" rel="noopener">
          <span class="service-name">VK –ú—É–∑—ã–∫–∞</span><span class="listen-chip">–°–ª—É—à–∞—Ç—å</span>
        </a>
        <a class="streaming-card" id="streamMTS" data-service="mts" href="#" target="_blank" rel="noopener">
          <span class="service-name">–ú–¢–° –ú—É–∑—ã–∫–∞</span><span class="listen-chip">–°–ª—É—à–∞—Ç—å</span>
        </a>
        <a class="streaming-card" id="streamSpotify" data-service="spotify" href="#" target="_blank" rel="noopener">
          <span class="service-name">Spotify</span><span class="listen-chip">–°–ª—É—à–∞—Ç—å</span>
        </a>
        <a class="streaming-card" id="streamApple" data-service="apple" href="#" target="_blank" rel="noopener">
          <span class="service-name">Apple Music</span><span class="listen-chip">–°–ª—É—à–∞—Ç—å</span>
        </a>
      </div>
    </section>

    <!-- –ö–ê–õ–ï–ù–î–ê–†–¨ (–∏–¥—ë—Ç –ø–æ—Å–ª–µ –ø–ª–µ–µ—Ä–∞) -->
    <section class="calendar-section section-card" aria-labelledby="calendarTitle">
      <div class="calendar-header">
        <h2 id="calendarTitle" class="section-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π</h2>
        <span id="calendarMonthLabel" class="calendar-month-label"></span>
      </div>
      <div class="calendar-stage" id="calendarStage" aria-live="polite"></div>
      <div class="calendar-controls calendar-controls-bottom">
        <button class="calendar-nav" id="calendarPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">‚ü®</button>
        <button class="calendar-nav" id="calendarNext" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">‚ü©</button>
      </div>
      <div class="event-wrapper" id="eventDetails"></div>
    </section>

    <!-- –§–ò–ù–ê–õ–¨–ù–´–ô –ë–õ–û–ö –° –ü–£–ù–ö–¢–ò–†–û–ú –î–õ–Ø –ö–ù–û–ü–ö–ò -->
    <section class="support-quote section-card" aria-labelledby="supportTitle">
      <h2 id="supportTitle" class="section-title" style="text-align:center">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</h2>
      <div class="support-grid">
        <blockquote>¬´–°–æ–±–∏—Ä–∞—é –Ω–∞ —Å–≤–µ–¥–µ–Ω–∏–µ –∏ –º–∞—Å—Ç–µ—Ä–∏–Ω–≥ —Ç—Ä–µ–∫–æ–≤¬ª</blockquote>
        <div id="supportDock" class="support-dock" aria-label="–ó–æ–Ω–∞ –ø–æ—Å–∞–¥–∫–∏ –∫–Ω–æ–ø–∫–∏">
          <!-- —Å—é–¥–∞ ¬´–ø—Ä–∏–∑–µ–º–ª–∏—Ç—Å—è¬ª –∫–Ω–æ–ø–∫–∞ -->
          –ü—É–Ω–∫—Ç–∏—Ä ‚Äî –º–µ—Å—Ç–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏
        </div>
      </div>
    </section>

    <!-- –§–£–¢–ï–† -->
    <footer id="contacts" class="site-footer">
      <div>–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º: <a href="mailto:varrrvarkaaa@yandex.ru">varrrvarkaaa@yandex.ru</a></div>
      <div class="footer-privacy"><button type="button" class="privacy-link" data-open-policy>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button></div>
      <div style="margin-top:10px;color:var(--color-text-muted);font-size:14px;">¬© 2025 –í–∞—Ä—è –ö—É–∑–Ω–µ—Ü–æ–≤–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</div>
      <div class="footer-made">–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–æ <a class="footer-made-link" href="https://vibecard.ru/?utm_source=site&utm_medium=cpc&utm_campaign=varia_kuz&utm_content=link" target="_blank" rel="noopener">Vibe Card</a></div>
    </footer>
  </div>

  <!-- –†–µ–∞–ª—å–Ω—ã–π –∞—É–¥–∏–æ-–ø–ª–µ–µ—Ä -->
  <audio id="audioElement" preload="metadata"></audio>

  <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å¬ª -->
  <a id="supportFab" class="support-fab" href="https://pay.cloudtips.ru/p/ee1db799" target="_blank" rel="noopener" aria-label="–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å">
    ‚ú® –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å
  </a>

  <script>
    // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    (function(){
      const btn = document.getElementById('mobileMenuButton');
      const menu = document.getElementById('mobileMenu');
      const overlay = document.getElementById('mobileMenuOverlay');
      if(!btn||!menu||!overlay) return;
      const links = menu.querySelectorAll('a');
      function openMenu(){ btn.setAttribute('aria-expanded','true'); btn.classList.add('is-open'); menu.hidden=false; overlay.hidden=false;
        requestAnimationFrame(()=>{menu.classList.add('open');overlay.classList.add('show')}); document.body.style.overflow='hidden';}
      function closeMenu(){ btn.setAttribute('aria-expanded','false'); btn.classList.remove('is-open'); menu.classList.remove('open'); overlay.classList.remove('show');
        setTimeout(()=>{menu.hidden=true;overlay.hidden=true},280); document.body.style.overflow='';}
      function toggle(){ (btn.getAttribute('aria-expanded')==='true')?closeMenu():openMenu(); }
      btn.addEventListener('click',toggle); overlay.addEventListener('click',closeMenu);
      document.addEventListener('keydown',e=>{if(e.key==='Escape') closeMenu()}); links.forEach(a=>a.addEventListener('click',closeMenu));
    })();

    // ===== –ö–∞–ª–µ–Ω–¥–∞—Ä—å (–¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏) =====
    const monthNames = ['—è–Ω–≤–∞—Ä—å','—Ñ–µ–≤—Ä–∞–ª—å','–º–∞—Ä—Ç','–∞–ø—Ä–µ–ª—å','–º–∞–π','–∏—é–Ω—å','–∏—é–ª—å','–∞–≤–≥—É—Å—Ç','—Å–µ–Ω—Ç—è–±—Ä—å','–æ–∫—Ç—è–±—Ä—å','–Ω–æ—è–±—Ä—å','–¥–µ–∫–∞–±—Ä—å'];

    const performanceSchedule = {
      '2025-11': {
        2:{dayLabel:'–≤—Å',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        8:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        11:{dayLabel:'–≤—Ç',time:'19:00',venue:'–±–∞—Ä ¬´Really Bar¬ª',metro:'–º. –ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥',address:'Really Bar, –ú–æ—Å–∫–≤–∞',special:'–ö–≤–∞—Ä—Ç–∏—Ä–Ω–∏–∫ ¬∑ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è'},
        13:{dayLabel:'—á—Ç',time:'20:00 ‚Äì 22:00',venue:'–±–∞—Ä ¬´–ö—É—Ä–æ—Ä—Ç¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ö—É—Ä–æ—Ä—Ç, –ú–æ—Å–∫–≤–∞'},
        14:{dayLabel:'–ø—Ç',time:'21:00 ‚Äì 23:00',venue:'–±–∞—Ä ¬´–ò –≤ –≥–æ—Ä–µ –∏ –≤ —Ä–∞–¥–æ—Å—Ç–∏¬ª',metro:'–º. –°—É—Ö–∞—Ä–µ–≤—Å–∫–∞—è',address:'–ò –≤ –≥–æ—Ä–µ –∏ –≤ —Ä–∞–¥–æ—Å—Ç–∏, –ú–æ—Å–∫–≤–∞'},
        15:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        20:{dayLabel:'—á—Ç',time:'21:00 ‚Äì 23:00',venue:'–±–∞—Ä ¬´Fest bar¬ª',metro:'–º. –ü—É—à–∫–∏–Ω—Å–∫–∞—è',address:'Fest bar, –ú–æ—Å–∫–≤–∞'},
        21:{dayLabel:'–ø—Ç',time:'20:00 ‚Äì 23:00',venue:'HookahPlace Lago',metro:'–º. –û–∑—ë—Ä–Ω–∞—è',address:'HookahPlace Lago, —É–ª. –û–∑—ë—Ä–Ω–∞—è, –ú–æ—Å–∫–≤–∞'},
        22:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        23:{dayLabel:'–≤—Å',time:'18:00 ‚Äì 20:00',venue:'–±–∞—Ä ¬´–ú–æ—Ä—è–∫ –∏ —á–∞–π–∫–∞¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ú–æ—Ä—è–∫ –∏ —á–∞–π–∫–∞, –ú–æ—Å–∫–≤–∞'},
        27:{dayLabel:'—á—Ç',time:'20:00 ‚Äì 22:00',venue:'–±–∞—Ä ¬´–ö—É—Ä–æ—Ä—Ç¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ö—É—Ä–æ—Ä—Ç, –ú–æ—Å–∫–≤–∞'},
        28:{dayLabel:'–ø—Ç',time:'20:00 ‚Äì 22:00',venue:'–ø–∞–± ¬´–ú–∞–∫–∫–ª–∞—Ä–µ–Ω—Å¬ª',metro:'–º. –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å',address:'–ú–∞–∫–∫–ª–∞—Ä–µ–Ω—Å, –ú–æ—Å–∫–≤–∞'},
        29:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'}
      },
      '2025-12': {
        5:{dayLabel:'–ø—Ç',time:'20:00 ‚Äì 23:00',venue:'HookahPlace Lago',metro:'–º. –û–∑—ë—Ä–Ω–∞—è',address:'HookahPlace Lago, —É–ª. –û–∑—ë—Ä–Ω–∞—è, –ú–æ—Å–∫–≤–∞'},
        6:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        11:{dayLabel:'—á—Ç',time:'20:00 ‚Äì 22:00',venue:'–±–∞—Ä ¬´–ö—É—Ä–æ—Ä—Ç¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ö—É—Ä–æ—Ä—Ç, –ú–æ—Å–∫–≤–∞'},
        13:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        18:{dayLabel:'—á—Ç',time:'20:00 ‚Äì 22:00',venue:'–±–∞—Ä ¬´–ö—É—Ä–æ—Ä—Ç¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ö—É—Ä–æ—Ä—Ç, –ú–æ—Å–∫–≤–∞'},
        19:{dayLabel:'–ø—Ç',time:'20:00 ‚Äì 22:00',venue:'–ø–∞–± ¬´–ú–∞–∫–∫–ª–∞—Ä–µ–Ω—Å¬ª',metro:'–º. –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å',address:'–ú–∞–∫–∫–ª–∞—Ä–µ–Ω—Å, –ú–æ—Å–∫–≤–∞'},
        20:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'},
        25:{dayLabel:'—á—Ç',time:'20:00 ‚Äì 22:00',venue:'–±–∞—Ä ¬´–ö—É—Ä–æ—Ä—Ç¬ª',metro:'–º. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è / –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è',address:'–ö—É—Ä–æ—Ä—Ç, –ú–æ—Å–∫–≤–∞'},
        26:{dayLabel:'–ø—Ç',time:'20:00 ‚Äì 23:00',venue:'HookahPlace Lago',metro:'–º. –û–∑—ë—Ä–Ω–∞—è',address:'HookahPlace Lago, —É–ª. –û–∑—ë—Ä–Ω–∞—è, –ú–æ—Å–∫–≤–∞'},
        27:{dayLabel:'—Å–±',time:'21:00 ‚Äì 00:00',venue:'–±–∞—Ä ¬´–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è¬ª',metro:'–º. –ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è / –ü–∞—Ä–∫ –ö—É–ª—å—Ç—É—Ä—ã',address:'–ë–µ—Ä–≥-–ö–æ–ª–ª–µ–≥–∏—è, –ú–æ—Å–∫–≤–∞'}
      }
    };

    // ¬´—Å–µ–≥–æ–¥–Ω—è¬ª –ø–æ –ú–æ—Å–∫–≤–µ
    function getMoscowToday(){
      const now=new Date();
      const ms=now.toLocaleString('en-US',{timeZone:'Europe/Moscow'});
      const m=new Date(ms);
      return new Date(m.getFullYear(),m.getMonth(),m.getDate());
    }
    const scheduleMonths=Object.keys(performanceSchedule).sort();
    const [firstYear,firstMonth]=scheduleMonths[0].split('-').map(Number);
    const startDate=new Date(firstYear,firstMonth-1,1);
    const moscowToday=getMoscowToday();

    function findNearestEvent(today){
      let nearestFuture=null,latestPast=null;
      scheduleMonths.forEach(monthKey=>{
        const [y,m]=monthKey.split('-').map(Number);
        Object.keys(performanceSchedule[monthKey]).forEach(d=>{
          const date=new Date(y,m-1,Number(d));
          const meta={monthKey,day:Number(d),dateObj:date};
          if(date>=today){ if(!nearestFuture||date<nearestFuture.dateObj) nearestFuture=meta; }
          else{ if(!latestPast||date>latestPast.dateObj) latestPast=meta; }
        });
      });
      return nearestFuture||latestPast;
    }
    const nearestEvent=findNearestEvent(moscowToday);
    ['2025-12','2026-01','2026-02','2026-03','2026-04','2026-05','2026-06','2026-07','2026-08','2026-09','2026-10','2026-11','2026-12']
      .forEach(k=>{ if(!performanceSchedule[k]) performanceSchedule[k]={}; });

    const calendarStage=document.getElementById('calendarStage');
    const monthLabel=document.getElementById('calendarMonthLabel');
    const prevBtn=document.getElementById('calendarPrev');
    const nextBtn=document.getElementById('calendarNext');
    const eventDetails=document.getElementById('eventDetails');
    let activeOffset=0,currentMonthElement=null,selectedDayKey=null;

    if(nearestEvent){
      activeOffset=(nearestEvent.dateObj.getFullYear()-startDate.getFullYear())*12+(nearestEvent.dateObj.getMonth()-startDate.getMonth());
      activeOffset=Math.max(0,activeOffset);
      selectedDayKey=`${nearestEvent.monthKey}-${String(nearestEvent.day).padStart(2,'0')}`;
    }
    function getMonthDate(offset){const d=new Date(startDate);d.setMonth(startDate.getMonth()+offset);return d}
    function getMonthKey(date){return `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}`}
    function capitalise(w){return w.charAt(0).toUpperCase()+w.slice(1)}
    function formatMonthLabel(date){return `${capitalise(monthNames[date.getMonth()])} ${date.getFullYear()}`}

    function createWeekdaysRow(){
      const days=['–ø–Ω','–≤—Ç','—Å—Ä','—á—Ç','–ø—Ç','—Å–±','–≤—Å']; const frag=document.createDocumentFragment();
      days.forEach(d=>{const el=document.createElement('div');el.className='weekday';el.textContent=d;frag.appendChild(el)});return frag;
    }

    function buildMonth(date){
      const monthKey=getMonthKey(date);
      const data=performanceSchedule[monthKey]||{};
      const monthEl=document.createElement('div');monthEl.className='calendar-month';
      const wd=document.createElement('div');wd.className='calendar-weekdays';wd.appendChild(createWeekdaysRow());
      const grid=document.createElement('div');grid.className='calendar-grid';
      const firstDay=new Date(date.getFullYear(),date.getMonth(),1);
      const firstWeekday=(firstDay.getDay()+6)%7;
      const daysInMonth=new Date(date.getFullYear(),date.getMonth()+1,0).getDate();
      for(let i=0;i<firstWeekday;i++){const e=document.createElement('div');e.className='calendar-day empty';grid.appendChild(e)}
      for(let day=1;day<=daysInMonth;day++){
        const cell=document.createElement('button');cell.type='button';cell.className='calendar-day';cell.textContent=day;
        cell.setAttribute('aria-label',`${day} ${formatMonthLabel(date)}`);
        const eventDate=new Date(date.getFullYear(),date.getMonth(),day);
        const isPast=eventDate<moscowToday;
        if(data[day]){
          cell.classList.add('performance'); if(isPast) cell.classList.add('past');
          const dayKey=`${monthKey}-${String(day).padStart(2,'0')}`;cell.dataset.dayKey=dayKey;
          cell.addEventListener('click',()=>{selectedDayKey=dayKey;showEventDetails(date,day);highlightSelectedDay()});
        } else { cell.disabled=true; }
        grid.appendChild(cell);
      }
      monthEl.appendChild(wd); monthEl.appendChild(grid); return monthEl;
    }
    function highlightSelectedDay(){
      document.querySelectorAll('.calendar-day.performance').forEach(el=>{
        el.classList.toggle('selected',el.dataset.dayKey===selectedDayKey);
      });
    }
    function showEmptyState(){ eventDetails.innerHTML=`<div class="event-details-card event-empty">–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ ‚Äî —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</div>`; }
    function showEventDetails(date,day){
      const monthKey=getMonthKey(date); const d=(performanceSchedule[monthKey]||{})[day]; if(!d) return showEmptyState();
      const dateObj=new Date(date.getFullYear(),date.getMonth(),day); const isPast=dateObj<moscowToday;
      const weekDayIndex=(dateObj.getDay()+6)%7; const weekdays=['–ø–Ω','–≤—Ç','—Å—Ä','—á—Ç','–ø—Ç','—Å–±','–≤—Å'];
      const formatted=`${String(day).padStart(2,'0')} ${capitalise(monthNames[date.getMonth()])}`;
      const mapsQuery=encodeURIComponent(d.address);
      eventDetails.innerHTML=`
        <div class="event-details-card ${isPast?'past-event':''}">
          <div class="event-details-top">
            <div class="event-info">
              <span class="event-date">${formatted} (${weekdays[weekDayIndex]})</span>
              <span class="event-meta">‚è∞ ${d.time}</span>
              <span class="event-meta">üìç ${d.venue}</span>
              <span class="event-meta">üöá ${d.metro}</span>
              ${d.special ? `<span class="event-special">${d.special}</span>` : ''}
            </div>
            <div class="event-map-links">
              <a class="map-btn" href="https://yandex.ru/maps/?text=${mapsQuery}" target="_blank" rel="noopener">
                <span>–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã</span><img src="icons/Yandex_Maps_icon.png" alt="–õ–æ–≥–æ—Ç–∏–ø –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç">
              </a>
              <a class="map-btn" href="https://2gis.ru/search/${mapsQuery}" target="_blank" rel="noopener">
                <span>2–ì–ò–°</span><img src="icons/2GIS_icon.png" alt="–õ–æ–≥–æ—Ç–∏–ø 2–ì–ò–°">
              </a>
            </div>
          </div>
        </div>`;
    }
    function renderCalendar(direction){
      const monthDate=getMonthDate(activeOffset); monthLabel.textContent=formatMonthLabel(monthDate);
      const monthEl=buildMonth(monthDate);
      if(direction==='next'){monthEl.classList.add('entering-from-bottom')}
      else if(direction==='prev'){monthEl.classList.add('entering-from-top')}
      calendarStage.appendChild(monthEl);
      requestAnimationFrame(()=>{monthEl.classList.add('is-active');monthEl.classList.remove('entering-from-bottom','entering-from-top')});
      if(currentMonthElement){
        currentMonthElement.classList.remove('entering-from-bottom','entering-from-top','is-active');
        currentMonthElement.classList.add(direction==='next'?'leaving-to-top':'leaving-to-bottom');
        const removeEl=currentMonthElement;
        removeEl.addEventListener('transitionend',()=>{removeEl.parentElement&&removeEl.parentElement.removeChild(removeEl)},{once:true});
      }
      currentMonthElement=monthEl;
      const existing=Array.from(monthEl.querySelectorAll('.calendar-day.performance')).find(d=>d.dataset.dayKey===selectedDayKey);
      if(existing){
        existing.classList.add('selected'); const n=Number(existing.textContent); showEventDetails(monthDate,n);
      } else {
        selectedDayKey=null; const first=monthEl.querySelector('.calendar-day.performance');
        if(first){ const n=Number(first.textContent); selectedDayKey=first.dataset.dayKey; showEventDetails(monthDate,n); highlightSelectedDay(); first.focus({preventScroll:true}); }
        else{ showEmptyState(); }
      }
    }
    const prevBtn=document.getElementById('calendarPrev'); const nextBtn=document.getElementById('calendarNext');
    prevBtn.addEventListener('click',()=>{activeOffset-=1;renderCalendar('prev')});
    nextBtn.addEventListener('click',()=>{activeOffset+=1;renderCalendar('next')});
    renderCalendar();

    // ===== –ê—É–¥–∏–æ-–ø–ª–µ–µ—Ä =====
    function toDirectDropbox(url){
      try{
        const u=new URL(url);
        if(u.hostname.endsWith('dropbox.com')){
          u.hostname='dl.dropboxusercontent.com';
          u.searchParams.delete('dl'); u.searchParams.delete('st');
          if(!u.searchParams.has('raw')) u.searchParams.set('raw','1');
        }
        return u.toString();
      }catch{return url}
    }

    const tracks=[
      {
        title:'–•–æ–ª–æ–¥–Ω–æ',
        artist:'–í–∞—Ä—è –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
        src:'https://www.dropbox.com/scl/fi/a5dx05ghgpx3oxncktp3z/Varya_Kuznecova_-_Holodno_-TheMP3.Info.mp3?rlkey=wnt75pauy3lr4if36b3qkohw5&st=p5uqo3zj&dl=0',
        cover:'images/holodno.png',
        links:{ yandex:'https://music.yandex.ru/album/35070253', vk:'https://music.vk.com/link/JzjyT', mts:'https://music.mts.ru/album/35070253',
                spotify:'https://open.spotify.com/album/4nMqCkHKgnWQKcX8GqGYYL', apple:'https://music.apple.com/us/album/1796888584?app=music' }
      },
      {
        title:'–ö–æ—à–∫–∞',
        artist:'–í–∞—Ä—è –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
        src:'https://www.dropbox.com/scl/fi/27lr9a6hhtxzbs2tsb027/Varya_Kuznecova_-_Koshka_-TheMP3.Info.mp3?rlkey=gjk40wi42v214tzbmss5gt3ni&st=f21juylk&dl=0',
        cover:'images/koshka.jpeg',
        links:{ yandex:'https://music.yandex.ru/album/35905040', vk:'https://music.vk.com/link/nqmOx',
                spotify:'https://open.spotify.com/album/6Zo6GMcDIknIGtJm3DW2Gh', apple:'https://music.apple.com/us/album/1804106048?app=music' }
      },
      {
        title:'–°—É–∫–∏',
        artist:'–í–∞—Ä—è –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
        src:'https://www.dropbox.com/scl/fi/h5bv9k0q4r9ysmcq45zho/Varya_Kuznecova_-_Suki_-TheMP3.Info.wav?rlkey=aqji9437wfpsgx1pw96u2pd6c&st=azpf4e64&dl=0',
        cover:'images/Suki.png',
        premiere:true
      }
    ];

    const audio=document.getElementById('audioElement');
    const trackCover=document.getElementById('trackCover');
    const trackTitle=document.getElementById('trackTitle');
    const trackArtist=document.getElementById('trackArtist');
    const playPauseButton=document.getElementById('playPause');
    const prevTrackButton=document.getElementById('prevTrack');
    const nextTrackButton=document.getElementById('nextTrack');
    const seekBar=document.getElementById('seekBar');
    const currentTimeEl=document.getElementById('currentTime');
    const totalTimeEl=document.getElementById('totalTime');
    const trackListEl=document.getElementById('trackList');
    const streamingButtons={
      yandex:document.getElementById('streamYandex'),
      vk:document.getElementById('streamVK'),
      mts:document.getElementById('streamMTS'),
      spotify:document.getElementById('streamSpotify'),
      apple:document.getElementById('streamApple')
    };
    let currentTrackIndex=0,isPlaying=false; const trackButtons=[];

    function formatTime(s){ if(!Number.isFinite(s)) return '0:00'; const m=Math.floor(s/60); const ss=String(Math.floor(s%60)).padStart(2,'0'); return `${m}:${ss}`; }
    function updatePlayPauseIcon(){ playPauseButton.textContent=isPlaying?'‚ùö‚ùö':'‚ñ∂'; }
    function updateStreamingLinks(track){
      Object.entries(streamingButtons).forEach(([service,btn])=>{
        const link=track.links?.[service]||null;
        if(link){ btn.href=link; btn.removeAttribute('aria-disabled'); btn.removeAttribute('tabindex'); btn.classList.remove('is-disabled'); }
        else{ btn.href='#'; btn.setAttribute('aria-disabled','true'); btn.setAttribute('tabindex','-1'); btn.classList.add('is-disabled'); }
      });
    }
    function loadTrack(index,autoplay=false){
      const track=tracks[index]; currentTrackIndex=index;
      audio.src=toDirectDropbox(track.src); audio.crossOrigin='anonymous';
      trackCover.src=track.cover||'images/holodno.png'; trackCover.alt=`–û–±–ª–æ–∂–∫–∞ —Ç—Ä–µ–∫–∞ ¬´${track.title}¬ª`;
      trackTitle.textContent=track.title; trackArtist.textContent=track.artist||''; seekBar.value=0;
      currentTimeEl.textContent='0:00'; totalTimeEl.textContent='0:00';
      trackButtons.forEach(btn=>btn.classList.toggle('is-active',Number(btn.dataset.index)===index));
      updateStreamingLinks(track);
      if(autoplay){ audio.play().then(()=>{isPlaying=true;updatePlayPauseIcon()}).catch(()=>{isPlaying=false;updatePlayPauseIcon()}); }
      else{ isPlaying=false;updatePlayPauseIcon(); }
    }

    // —Ä–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–∫–æ–≤ (—Å ¬´–ü—Ä–µ–º—å–µ—Ä–∞!¬ª)
    tracks.forEach((track,index)=>{
      const btn=document.createElement('button'); btn.className='track-item'; btn.type='button'; btn.dataset.index=index;
      const badge = track.premiere ? `<span class="track-badge">–ü—Ä–µ–º—å–µ—Ä–∞!</span>` : '';
      btn.innerHTML=`<span>${track.title}${badge}</span><span class="track-duration" data-duration></span>`;
      btn.addEventListener('click',()=>{ const needAutoplay=(currentTrackIndex===index)?!isPlaying:true; loadTrack(index,needAutoplay); });
      trackListEl.appendChild(btn); trackButtons.push(btn);
    });

    playPauseButton.addEventListener('click',()=>{
      if(!audio.src){ loadTrack(0,true); return; }
      if(audio.paused){ audio.play().then(()=>{isPlaying=true;updatePlayPauseIcon()}); }
      else{ audio.pause(); isPlaying=false;updatePlayPauseIcon(); }
    });
    prevTrackButton.addEventListener('click',()=>{ const i=(currentTrackIndex-1+tracks.length)%tracks.length; loadTrack(i,isPlaying); });
    nextTrackButton.addEventListener('click',()=>{ const i=(currentTrackIndex+1)%tracks.length; loadTrack(i,isPlaying); });

    audio.addEventListener('loadedmetadata',()=>{
      totalTimeEl.textContent=formatTime(audio.duration);
      const d=trackButtons[currentTrackIndex].querySelector('[data-duration]'); if(d) d.textContent=formatTime(audio.duration);
    });
    audio.addEventListener('timeupdate',()=>{ if(audio.duration) seekBar.value=(audio.currentTime/audio.duration)*100; currentTimeEl.textContent=formatTime(audio.currentTime); });
    audio.addEventListener('ended',()=>{ const i=(currentTrackIndex+1)%tracks.length; loadTrack(i,true); });
    seekBar.addEventListener('input',()=>{ if(!audio.duration) return; audio.currentTime=(seekBar.value/100)*audio.duration; });

    // ¬´–°–µ–π—á–∞—Å –∑–≤—É—á–∏—Ç¬ª ‚Äî –∫–ª–∞—Å—Å –Ω–∞ body
    (function(){ const root=document.body;
      function onPlay(){ root.classList.add('player-playing'); }
      function onStop(){ root.classList.remove('player-playing'); }
      audio.addEventListener('play',onPlay); audio.addEventListener('pause',onStop); audio.addEventListener('ended',onStop);
      if(!audio.paused && !audio.ended) onPlay();
    })();

    // –∑–∞–≥—Ä—É–∑–∏–º –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫ (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞)
    loadTrack(0,false);

    // ===== –î–æ–∫-–ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ ¬´–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å¬ª =====
    (function(){
      const fab=document.getElementById('supportFab');
      const dock=document.getElementById('supportDock');
      if(!fab||!dock) return;

      const obs=new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(e.isIntersecting && e.intersectionRatio>0.75){
            // ¬´–ø—Ä–∏–∑–µ–º–ª—è–µ–º¬ª –∫–Ω–æ–ø–∫—É –≤–Ω—É—Ç—Ä—å –ø—É–Ω–∫—Ç–∏—Ä–∞
            dock.appendChild(fab);
            fab.classList.add('is-docked');
          } else {
            // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –æ–±—Ä–∞—Ç–Ω–æ –≤ body (—Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞)
            if(fab.parentElement!==document.body){
              document.body.appendChild(fab);
            }
            fab.classList.remove('is-docked');
          }
        });
      },{threshold:[0,0.75,1]});
      obs.observe(dock);
    })();
  </script>
</body>
</html>
